// Last commit: a6a4250 (2014-02-24 20:10:26 -0600)


// Copyright: Â©2012-2013 Erik Bryn, Yapp Inc., and contributors.
!function(){function e(e,t){return e&&t&&e.x===t.x&&e.y===t.y}function t(){var t,n,r;Ember.instrument("view.updateContext.positionElement",this,function(){t=i(this,"element"),n=this.position,r=this._position,n&&t&&(e(n,r)||(Ember.run.schedule("render",this,this._parentView.applyTransform,t,n.x,n.y),this._position=n))},this)}var i=Ember.get;Ember.set,Ember.ListItemViewMixin=Ember.Mixin.create({init:function(){this._super(),this.one("didInsertElement",t)},classNames:["ember-list-item-view"],_position:null,updatePosition:function(e){this.position=e,this._positionElement()},_positionElement:t})}(),function(){function e(e){e.willInsertElement&&e.willInsertElement()}function t(e){e.didInsertElement&&e.didInsertElement()}function i(){var i,o,l,h;i=n(this,"element"),i&&(l=n(this,"context"),this.triggerRecursively("willClearRender"),this.lengthAfterRender>this.lengthBeforeRender&&(this.clearRenderedChildren(),this._childViews.length=this.lengthBeforeRender),l?(o=Ember.RenderBuffer(),o=this.renderToBuffer(o),h=this._childViews.length>0,h&&this.invokeRecursively(e,!1),i.innerHTML=o.innerString?o.innerString():s(o),r(this,"element",i),this.transitionTo("inDOM"),h&&this.invokeRecursively(t,!1)):i.innerHTML="")}var n=Ember.get,r=Ember.set,s=function(e){var t=[],i=e.childBuffers;return Ember.ArrayPolyfills.forEach.call(i,function(e){var i="string"==typeof e;i?t.push(e):e.array(t)}),t.join("")};Ember.ListItemView=Ember.View.extend(Ember.ListItemViewMixin,{updateContext:function(e){var t=n(this,"context");Ember.instrument("view.updateContext.render",this,function(){t!==e&&(r(this,"context",e),e&&e.isController&&r(this,"controller",e))},this)},rerender:function(){Ember.run.scheduleOnce("render",this,i)},_contextDidChange:Ember.observer(i,"context","controller")})}(),function(){var e=Ember.get,t=Ember.set;Ember.ReusableListItemView=Ember.View.extend(Ember.ListItemViewMixin,{init:function(){this._super();var e=Ember.ObjectProxy.create();this.set("context",e),this._proxyContext=e},isVisible:Ember.computed("context.content",function(){return!!this.get("context.content")}),updateContext:function(i){var n=e(this._proxyContext,"content");n!==i&&("inDOM"===this.state&&this.prepareForReuse(i),t(this._proxyContext,"content",i),i&&i.isController&&t(this,"controller",i))},prepareForReuse:Ember.K})}(),function(){function e(e){if(e in i)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),r=0;r<n.length;r++){var s=n[r]+t;if(s in i)return s}return null}var t=document.createElement("div"),i=t.style,n=["Webkit","Moz","O","ms"],r=e("transform"),s=e("perspective"),o=null!==r,l=null!==s;Ember.ListViewHelper={transformProp:r,applyTransform:function(){return o?function(e,t,i){e.style[r]="translate("+t+"px, "+i+"px)"}:function(e,t,i){e.style.top=i+"px",e.style.left=t+"px"}}(),apply3DTransform:function(){return l?function(e,t,i){e.style[r]="translate3d("+t+"px, "+i+"px, 0)"}:o?function(e,t,i){e.style[r]="translate("+t+"px, "+i+"px)"}:function(e,t,i){e.style.top=i+"px",e.style.left=t+"px"}}()}}(),function(){function e(){var e=s(this,"content");e&&e.addArrayObserver(this)}function t(e){this.removeObject(e),e.destroy()}function i(){Ember.run.once(this,"_syncChildViews")}function n(e,t){return s(e,"contentIndex")-s(t,"contentIndex")}function r(){Ember.View.notifyMutationListeners&&Ember.run.once(Ember.View,"notifyMutationListeners")}var s=Ember.get,o=Ember.set,l=Math.min,h=Math.max,c=Math.floor,a=Math.ceil,u=Ember.ArrayPolyfills.forEach,d=Ember.create(Ember.ContainerView.proto().domManager);d.prepend=function(e,t){e.$(".ember-list-container").prepend(t),r()},Ember.ListViewMixin=Ember.Mixin.create({itemViewClass:Ember.ReusableListItemView,emptyViewClass:Ember.View,classNames:["ember-list-view"],attributeBindings:["style"],domManager:d,scrollTop:0,bottomPadding:0,_lastEndingIndex:0,paddingCount:1,init:function(){this._super(),this.on("didInsertElement",this._syncListContainerWidth),this.columnCountDidChange(),this._syncChildViews(),this._addContentArrayObserver()},_addContentArrayObserver:Ember.beforeObserver(function(){e.call(this)},"content"),render:function(e){e.push('<div class="ember-list-container">'),this._super(e),e.push("</div>")},willInsertElement:function(){if(!this.get("height")||!this.get("rowHeight"))throw new Error("A ListView must be created with a height and a rowHeight.");this._super()},style:Ember.computed("height","width",function(){var e,t,i,n;e=s(this,"height"),t=s(this,"width"),n=s(this,"css"),i="",e&&(i+="height:"+e+"px;"),t&&(i+="width:"+t+"px;");for(var r in n)n.hasOwnProperty(r)&&(i+=r+":"+n[r]+";");return i}),scrollTo:function(){throw new Error("must override to perform the visual scroll and effectively delegate to _scrollContentTo")},_scrollTo:Ember.K,_scrollContentTo:function(e){var t,i,n,r,o,c,a;if(c=h(0,e),this.scrollTop!==c){var u=h(0,s(this,"totalHeight")-s(this,"height"));c=l(c,u),a=s(this,"content"),o=s(a,"length"),t=this._startingIndex(o),Ember.instrument("view._scrollContentTo",{scrollTop:c,content:a,startingIndex:t,endingIndex:l(h(o-1,0),t+this._numChildViewsForViewport())},function(){return this.scrollTop=c,r=h(o-1,0),t=this._startingIndex(),n=t+this._numChildViewsForViewport(),i=l(r,n),t===this._lastStartingIndex&&i===this._lastEndingIndex?(this.trigger("scrollYChanged",e),void 0):(Ember.run(this,function(){this._reuseChildren(),this._lastStartingIndex=t,this._lastEndingIndex=i,this.trigger("scrollYChanged",e)}),void 0)},this)}},totalHeight:Ember.computed("content.length","rowHeight","columnCount","bottomPadding",function(){var e,t,i,n;return e=s(this,"content.length"),t=s(this,"rowHeight"),i=s(this,"columnCount"),n=s(this,"bottomPadding"),a(e/i)*t+n}),_prepareChildForReuse:function(e){e.prepareForReuse()},_reuseChildForContentIndex:function(e,t){var i,n,r,l;i=s(this,"content"),l=s(this,"enableProfiling"),r=this.positionForIndex(t),e.updatePosition(r),o(e,"contentIndex",t),l&&Ember.instrument("view._reuseChildForContentIndex",r,function(){},this),n=i.objectAt(t),e.updateContext(n)},positionForIndex:function(e){var t,i,n,r,o,l;return t=s(this,"elementWidth")||1,i=s(this,"width")||1,n=s(this,"columnCount"),r=s(this,"rowHeight"),o=r*c(e/n),l=e%n*t,{y:o,x:l}},_childViewCount:function(){var e,t;return e=s(this,"content.length"),t=this._numChildViewsForViewport(),l(e,t)},columnCount:Ember.computed("width","elementWidth",function(){var e,t,i;return e=s(this,"elementWidth"),t=s(this,"width"),i=e&&t>e?c(t/e):1}),columnCountDidChange:Ember.observer(function(){var e,t,i,n,r,o,h,c;o=this._lastColumnCount,t=this.scrollTop,h=s(this,"columnCount"),n=s(this,"maxScrollTop"),c=s(this,"element"),this._lastColumnCount=h,o&&(e=o/h,i=t*e,r=l(n,i),this._scrollTo(r),this.scrollTop=r),arguments.length>0&&Ember.run.schedule("afterRender",this,this._syncListContainerWidth)},"columnCount"),maxScrollTop:Ember.computed("height","totalHeight",function(){var e,t;return e=s(this,"totalHeight"),t=s(this,"height"),h(0,e-t)}),_numChildViewsForViewport:function(){var e,t,i,n;return e=s(this,"height"),t=s(this,"rowHeight"),i=s(this,"paddingCount"),n=s(this,"columnCount"),a(e/t)*n+i*n},_startingIndex:function(e){var t,i,n,r,o,a;return o=void 0===e?s(this,"content.length"):e,t=this.scrollTop,i=s(this,"rowHeight"),n=s(this,"columnCount"),r=c(t/i)*n,a=h(o-1,0),l(r,a)},contentWillChange:Ember.beforeObserver(function(){var e;e=s(this,"content"),e&&e.removeArrayObserver(this)},"content"),contentDidChange:Ember.observer(function(){e.call(this),i.call(this)},"content"),needsSyncChildViews:Ember.observer(i,"height","width","columnCount"),_addItemView:function(){var e,t;e=s(this,"itemViewClass"),t=this.createChildView(e),this.pushObject(t)},_syncChildViews:function(){var e,i,n,r,o,l,h,c,a;if(!s(this,"isDestroyed")&&!s(this,"isDestroying")){if(i=this._childViewCount(),l=this.positionOrderedChildViews(),e=this._startingIndex(),n=e+i,o=i,r=l.length,c=o-r,0===c);else if(c>0)for(a=this._lastEndingIndex,h=0;c>h;h++,a++)this._addItemView(a);else u.call(l.splice(o,r),t,this);this._reuseChildren(),this._lastStartingIndex=e,this._lastEndingIndex=this._lastEndingIndex+c}},_syncListContainerWidth:function(){var e,t,i,n;e=s(this,"elementWidth"),t=s(this,"columnCount"),i=e*t,n=this.$(".ember-list-container"),i&&n&&n.css("width",i)},_reuseChildren:function(){var e,t,i,n,r,o,c,a,u,d,m;for(m=this.scrollTop,e=s(this,"content.length"),u=h(e-1,0),t=this.getReusableChildViews(),i=t.length,n=this._startingIndex(),a=n+this._numChildViewsForViewport(),r=l(u,a),d=l(a,n+i),c=n;d>c;c++)o=t[c%i],this._reuseChildForContentIndex(o,c)},getReusableChildViews:function(){return this._childViews},positionOrderedChildViews:function(){return this.getReusableChildViews().sort(n)},arrayWillChange:Ember.K,arrayDidChange:function(e,t){var n,r;"inDOM"===this.state&&((t>=this._lastStartingIndex||t<this._lastEndingIndex)&&(n=0,u.call(this.positionOrderedChildViews(),function(e){r=this._lastStartingIndex+n,this._reuseChildForContentIndex(e,r),n++},this)),i.call(this))}})}(),function(){var e=Ember.get;Ember.set,Ember.ListView=Ember.ContainerView.extend(Ember.ListViewMixin,{css:{position:"relative",overflow:"scroll","-webkit-overflow-scrolling":"touch","overflow-scrolling":"touch"},applyTransform:Ember.ListViewHelper.applyTransform,_scrollTo:function(t){var i=e(this,"element");i&&(i.scrollTop=t)},didInsertElement:function(){var t=this,i=e(this,"element");this._updateScrollableHeight(),this._scroll=function(e){t.scroll(e)},Ember.$(i).on("scroll",this._scroll)},willDestroyElement:function(){var t;t=e(this,"element"),Ember.$(t).off("scroll",this._scroll)},scroll:function(e){this.scrollTo(e.target.scrollTop)},scrollTo:function(t){e(this,"element"),this._scrollTo(t),this._scrollContentTo(t)},totalHeightDidChange:Ember.observer(function(){Ember.run.scheduleOnce("afterRender",this,this._updateScrollableHeight)},"totalHeight"),_updateScrollableHeight:function(){"inDOM"===this.state&&this.$(".ember-list-container").css({height:e(this,"totalHeight")})}})}(),function(){function e(e){this.mouseWheel(e),e.preventDefault()}function t(e,t){e.addEventListener(u,t.start,!1),e.addEventListener("mousewheel",t.wheel,!1)}function i(e,t){e.removeEventListener(u,t.start,!1),e.removeEventListener("mousewheel",t.wheel,!1)}function n(e){window.addEventListener(d,e.move,!0),window.addEventListener(m,e.end,!0),window.addEventListener(f,e.cancel,!0)}function r(e){window.removeEventListener(d,e.move,!0),window.removeEventListener(m,e.end,!0),window.removeEventListener(f,e.cancel,!0)}function s(e,t){return function(i){t.call(e,i)}}function o(e){var t,i=e.changedTouches[0],n=i.target;return n&&g.test(n.tagName)?(t=document.createEvent("MouseEvents"),t.initMouseEvent("click",!0,!0,e.view,1,i.screenX,i.screenY,i.clientX,i.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null),n.dispatchEvent(t)):void 0}var l,h,c,a,u,d,m,f,g=/input|textarea|select/i,p="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch;p?(u="touchstart",l=function(e){var t=e.touches[0],i=t&&t.target;i&&g.test(i.tagName)||(n(this.scrollerEventHandlers),this.willBeginScroll(e.touches,e.timeStamp),e.preventDefault())},d="touchmove",h=function(e){this.continueScroll(e.touches,e.timeStamp)},m="touchend",c=function(e){this._isScrolling||o(e),r(this.scrollerEventHandlers),this.endScroll(e.timeStamp)},f="touchcancel",a=function(e){r(this.scrollerEventHandlers),this.endScroll(e.timeStamp)}):(u="mousedown",l=function(e){if(1===e.which){var t=e.target;t&&g.test(t.tagName)||(n(this.scrollerEventHandlers),this.willBeginScroll([e],e.timeStamp),e.preventDefault())}},d="mousemove",h=function(e){this.continueScroll([e],e.timeStamp)},m="mouseup",c=function(e){r(this.scrollerEventHandlers),this.endScroll(e.timeStamp)},f="mouseout",a=function(e){e.relatedTarget||(r(this.scrollerEventHandlers),this.endScroll(e.timeStamp))}),Ember.VirtualListScrollerEvents=Ember.Mixin.create({init:function(){return this.on("didInsertElement",this,"bindScrollerEvents"),this.on("willDestroyElement",this,"unbindScrollerEvents"),this.scrollerEventHandlers={start:s(this,l),move:s(this,h),end:s(this,c),cancel:s(this,a),wheel:s(this,e)},this._super()},bindScrollerEvents:function(){var e=this.get("element"),i=this.scrollerEventHandlers;t(e,i)},unbindScrollerEvents:function(){var e=this.get("element"),t=this.scrollerEventHandlers;i(e,t),r(t)}})}(),function(){function e(e){var i,n,r;e=e||this,i=t(e,"width"),n=t(e,"height"),r=t(e,"totalHeight"),e.scroller.setDimensions(i,n,i,r),e.trigger("scrollerDimensionsDidChange")}var t=(Math.max,Ember.get);Ember.set,Ember.VirtualListView=Ember.ContainerView.extend(Ember.ListViewMixin,Ember.VirtualListScrollerEvents,{_isScrolling:!1,_mouseWheel:null,css:{position:"relative",overflow:"hidden"},init:function(){this._super(),this.setupScroller(),this.setupPullToRefresh()},_scrollerTop:0,applyTransform:Ember.ListViewHelper.apply3DTransform,setupScroller:function(){var t;t=this,t.scroller=new Scroller(function(e,i){"inDOM"===t.state&&t.listContainerElement&&(t._scrollerTop=i,t._scrollContentTo(i),t.applyTransform(t.listContainerElement,0,-i))},{scrollingX:!1,scrollingComplete:function(){t.trigger("scrollingDidComplete")}}),t.trigger("didInitializeScroller"),e(t)},setupPullToRefresh:function(){this.pullToRefreshViewClass&&(this._insertPullToRefreshView(),this._activateScrollerPullToRefresh())},_insertPullToRefreshView:function(){this.pullToRefreshView=this.createChildView(this.pullToRefreshViewClass),this.insertAt(0,this.pullToRefreshView);var e=this;this.pullToRefreshView.on("didInsertElement",function(){Ember.run.schedule("afterRender",this,function(){e.applyTransform(this.get("element"),0,-1*e.pullToRefreshViewHeight)})})},_activateScrollerPullToRefresh:function(){function e(){n.pullToRefreshView.set("active",!0),n.trigger("activatePullToRefresh")}function t(){n.pullToRefreshView.set("active",!1),n.trigger("deactivatePullToRefresh")}function i(){Ember.run(function(){function e(){!n||n.get("isDestroyed")||n.get("isDestroying")||(n.scroller.finishPullToRefresh(),n.pullToRefreshView.set("refreshing",!1))}n.pullToRefreshView.set("refreshing",!0),n.startRefresh(e)})}var n=this;this.scroller.activatePullToRefresh(this.pullToRefreshViewHeight,e,t,i)},getReusableChildViews:function(){var e=this._childViews[0];return e&&e===this.pullToRefreshView?this._childViews.slice(1):this._childViews},scrollerDimensionsNeedToChange:Ember.observer(function(){Ember.run.once(this,e)},"width","height","totalHeight"),didInsertElement:function(){this.listContainerElement=this.$("> .ember-list-container")[0]},willBeginScroll:function(e,t){this._isScrolling=!1,this.trigger("scrollingDidStart"),this.scroller.doTouchStart(e,t)},continueScroll:function(e,t){var i,n,r;this._isScrolling?this.scroller.doTouchMove(e,t):(i=this._scrollerTop,this.scroller.doTouchMove(e,t),n=this._scrollerTop,i!==n&&(r=Ember.$.Event("scrollerstart"),Ember.$(e[0].target).trigger(r),this._isScrolling=!0))},endScroll:function(e){this.scroller.doTouchEnd(e)},scrollTo:function(e,t){void 0===t&&(t=!0),this.scroller.scrollTo(0,e,t,1)},mouseWheel:function(e){var t,i,n;return t=e.webkitDirectionInvertedFromDevice,i=e.wheelDeltaY*(t?.8:-.8),n=this.scroller.__scrollTop+i,n>=0&&n<=this.scroller.__maxScrollTop&&this.scroller.scrollBy(0,i,!0),!1}})}(),function(){Ember.Handlebars.registerHelper("ember-list",function(e){var t=e.hash,i=e.hashTypes;t.content=t.items,delete t.items,i.content=i.items,delete i.items,t.content||(t.content="this",i.content="ID");for(var n in t)if(/-/.test(n)){var r=Ember.String.camelize(n);t[r]=t[n],i[r]=i[n],delete t[n],delete i[n]}return Ember.Handlebars.helpers.collection.call(this,"Ember.ListView",e)})}(),"undefined"==typeof location||"localhost"!==location.hostname&&"127.0.0.1"!==location.hostname||Ember.Logger.warn("You are running a production build of Ember on localhost and won't receive detailed error messages. If you want full error messages please use the non-minified build provided on the Ember website.");